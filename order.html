<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Commander - PizzaMan</title><style>body{padding-top:70px}
header#main-header{position:fixed;top:0;width:100%;background:#fff;box-shadow:0 2px 15px rgba(0,0,0,.08);z-index:1000;transition:all .3s}
nav{display:flex;justify-content:space-between;align-items:center;padding:.8rem 5%;max-width:1400px;margin:0 auto}
.logo{font-family:'Playfair Display',serif;font-size:1.8rem;color:#D64541;font-weight:700;text-decoration:none}
.nav-links{display:flex;list-style:none;gap:1.5rem;align-items:center;margin:0;padding:0}
.nav-links a{text-decoration:none;color:#2C3E50;font-weight:500;font-size:.95rem;transition:color .3s}
.nav-links a:hover{color:#D64541}
.cart-icon{position:relative;font-size:1.3rem!important;cursor:pointer}
.cart-count{position:absolute;top:-8px;right:-10px;background:#D64541;color:#fff;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:600}
.hamburger{display:none;flex-direction:column;cursor:pointer;padding:5px}
.hamburger span{width:25px;height:3px;background:#2C3E50;margin:3px 0;transition:all .3s;border-radius:2px}
@media(max-width:768px){.nav-links{position:fixed;top:0;right:-100%;width:70%;height:100vh;background:#fff;flex-direction:column;padding:80px 30px 30px;box-shadow:-5px 0 15px rgba(0,0,0,.1);transition:right .3s}
.nav-links.active{right:0}
.hamburger{display:flex}}
@keyframes slideInToast{from{transform:translateX(100%);opacity:0}to{transform:translateX(0);opacity:1}}
@keyframes slideOutToast{from{transform:translateX(0);opacity:1}to{transform:translateX(100%);opacity:0}}
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#f5f5f5;color:#333;line-height:1.6}header{background:linear-gradient(135deg,#e74c3c,#c0392b);color:#fff;padding:1rem 0;box-shadow:0 2px 10px rgba(0,0,0,.2);position:sticky;top:0;z-index:100}nav{max-width:1200px;margin:0 auto;padding:0 20px;display:flex;justify-content:space-between;align-items:center}nav h1{font-size:1.8rem;font-weight:700;cursor:pointer}nav ul{list-style:none;display:flex;gap:2rem}nav a{color:#fff;text-decoration:none;font-weight:500;transition:.3s}nav a:hover{color:#ffd700}.container{max-width:1200px;margin:2rem auto;padding:0 20px;display:grid;grid-template-columns:1fr 400px;gap:2rem;align-items:start}.form-section{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1)}.cart-summary{background:#fff;padding:2rem;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1);position:sticky;top:80px}.section-title{font-size:1.5rem;color:#e74c3c;margin-bottom:1.5rem;padding-bottom:.5rem;border-bottom:2px solid #e74c3c}.form-group{margin-bottom:1.5rem}.form-row{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-group label{display:block;margin-bottom:.5rem;font-weight:600;color:#555}.form-group input,.form-group textarea,.form-group select{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:5px;font-size:1rem;transition:.3s}.form-group input:focus,.form-group textarea:focus{outline:none;border-color:#e74c3c;box-shadow:0 0 0 3px rgba(231,76,60,.1)}.radio-group{display:flex;flex-direction:column;gap:1rem}.radio-option{display:flex;align-items:center;padding:1rem;border:2px solid #ddd;border-radius:8px;cursor:pointer;transition:.3s}.radio-option:hover{border-color:#e74c3c;background:#fff5f5}.radio-option input[type="radio"]{margin-right:1rem;width:20px;height:20px;cursor:pointer}.radio-option.selected{border-color:#e74c3c;background:#fff5f5}.payment-fields{margin-top:1rem;display:none;animation:slideDown .3s ease}.payment-fields.active{display:block}@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}textarea{resize:vertical;min-height:100px;font-family:inherit}.cart-item{display:flex;gap:1rem;padding:1rem;border:1px solid #eee;border-radius:8px;margin-bottom:1rem;transition:.3s}.cart-item.removing{animation:slideOut .3s ease forwards}@keyframes slideOut{to{opacity:0;transform:translateX(100px)}}.cart-item img{width:80px;height:80px;object-fit:cover;border-radius:8px}.cart-item-details{flex:1}.cart-item-name{font-weight:600;color:#333;margin-bottom:.25rem}.cart-item-price{color:#e74c3c;font-size:.9rem}.quantity-control{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}.quantity-btn{background:#e74c3c;color:#fff;border:none;width:28px;height:28px;border-radius:50%;cursor:pointer;font-size:1.2rem;display:flex;align-items:center;justify-content:center;transition:.3s}.quantity-btn:hover{background:#c0392b}.quantity-value{font-weight:600;min-width:30px;text-align:center}.remove-btn{background:#ff6b6b;color:#fff;border:none;padding:.5rem;border-radius:5px;cursor:pointer;transition:.3s}.remove-btn:hover{background:#e74c3c}.empty-cart{text-align:center;padding:2rem}.empty-cart-icon{font-size:4rem;color:#ddd;margin-bottom:1rem}.price-row{display:flex;justify-content:space-between;padding:.75rem 0;border-bottom:1px solid #eee}.price-row.total{font-size:1.3rem;font-weight:700;color:#e74c3c;border-bottom:none;margin-top:.5rem}.btn{padding:1rem 2rem;border:none;border-radius:8px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:.3s;width:100%}.btn-primary{background:#e74c3c;color:#fff}.btn-primary:hover:not(:disabled){background:#c0392b;transform:translateY(-2px);box-shadow:0 4px 12px rgba(231,76,60,.3)}.btn-primary:disabled{background:#ccc;cursor:not-allowed}.btn-secondary{background:#fff;color:#e74c3c;border:2px solid #e74c3c}.btn-secondary:hover{background:#e74c3c;color:#fff}.btn-loading{position:relative;color:transparent}.btn-loading::after{content:"";position:absolute;top:50%;left:50%;width:20px;height:20px;margin:-10px 0 0 -10px;border:3px solid #fff;border-radius:50%;border-top-color:transparent;animation:spin .8s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.toast{position:fixed;bottom:20px;right:20px;background:#333;color:#fff;padding:1rem 1.5rem;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.3);z-index:1000;animation:toastIn .3s ease}@keyframes toastIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.toast.success{background:#27ae60}.toast.error{background:#e74c3c}.error-message{color:#e74c3c;font-size:.85rem;margin-top:.25rem;display:none}.form-group.error input,.form-group.error textarea{border-color:#e74c3c}.form-group.error .error-message{display:block}@media(max-width:768px){.container{grid-template-columns:1fr}.cart-summary{position:static}nav ul{gap:1rem;font-size:.9rem}.form-row{grid-template-columns:1fr}}</style><link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"></head><body><header id="main-header">
<nav>
<a href="index.html" class="logo">Pizza<span style="color:#E67E22">Man</span></a>
<ul class="nav-links" id="navLinks">
<li><a href="index.html">Accueil</a></li>
<li><a href="menu.html">Menu</a></li>
<li><a href="order.html">Commander</a></li>
<li><a href="login.html" id="nav-account-link">Mon Compte</a></li>
<li><a href="order.html" class="cart-icon"><i class="fa-solid fa-cart-shopping"></i><span class="cart-count" id="cartCount">0</span></a></li>
</ul>
<div class="hamburger" id="hamburger" onclick="toggleMobileMenu()">
<span></span><span></span><span></span>
</div>
</nav>
</header><div class="container"><div class="form-section"><h2 class="section-title">Vos informations</h2><form id="orderForm"><div class="form-row"><div class="form-group"><label for="firstName">Pr√©nom *</label><input type="text" id="firstName" required><span class="error-message">Champ requis</span></div><div class="form-group"><label for="lastName">Nom *</label><input type="text" id="lastName" required><span class="error-message">Champ requis</span></div></div><div class="form-row"><div class="form-group"><label for="email">Email *</label><input type="email" id="email" required><span class="error-message">Email invalide</span></div><div class="form-group"><label for="phone">T√©l√©phone *</label><input type="tel" id="phone" required placeholder="06 12 34 56 78"><span class="error-message">Num√©ro invalide</span></div></div><h2 class="section-title" style="margin-top:2rem">Adresse de livraison</h2><div class="form-group"><label for="address">Adresse *</label><input type="text" id="address" required><span class="error-message">Champ requis</span></div><div class="form-row"><div class="form-group"><label for="zipCode">Code postal *</label><input type="text" id="zipCode" required pattern="[0-9]{5}" placeholder="75001"><span class="error-message">5 chiffres requis</span></div><div class="form-group"><label for="city">Ville *</label><input type="text" id="city" required><span class="error-message">Champ requis</span></div></div><h2 class="section-title" style="margin-top:2rem">Mode de livraison</h2><div class="radio-group"><label class="radio-option" data-delivery="home"><input type="radio" name="delivery" value="home" checked><div><strong>Livraison √† domicile</strong><div style="color:#888;font-size:.9rem">Frais: 3.50‚Ç¨</div></div></label><label class="radio-option" data-delivery="pickup"><input type="radio" name="delivery" value="pickup"><div><strong>Retrait en magasin</strong><div style="color:#888;font-size:.9rem">Gratuit</div></div></label></div><h2 class="section-title" style="margin-top:2rem">Paiement</h2><div class="radio-group"><label class="radio-option" data-payment="card"><input type="radio" name="payment" value="card" checked><strong>Carte bancaire</strong></label><label class="radio-option" data-payment="cash"><input type="radio" name="payment" value="cash"><strong>Esp√®ces √† la livraison</strong></label></div><div class="payment-fields active" id="cardFields"><div class="form-group"><label for="cardNumber">Num√©ro de carte *</label><input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19"><span class="error-message">16 chiffres requis</span></div><div class="form-row"><div class="form-group"><label for="cardExpiry">Expiration *</label><input type="text" id="cardExpiry" placeholder="MM/AA" maxlength="5"><span class="error-message">Format MM/AA</span></div><div class="form-group"><label for="cardCVV">CVV *</label><input type="text" id="cardCVV" placeholder="123" maxlength="3"><span class="error-message">3 chiffres requis</span></div></div></div><h2 class="section-title" style="margin-top:2rem">Instructions sp√©ciales</h2><div class="form-group"><textarea id="instructions" placeholder="Allergies, pr√©cisions d'acc√®s, etc."></textarea></div></form></div><div class="cart-summary"><h2 class="section-title">Votre commande</h2><div id="cartItems"></div><div id="cartTotals" style="display:none"><div class="price-row"><span>Sous-total</span><span id="subtotal">0.00‚Ç¨</span></div><div class="price-row"><span>Frais de livraison</span><span id="deliveryFee">3.50‚Ç¨</span></div><div class="price-row total"><span>Total TTC</span><span id="total">0.00‚Ç¨</span></div><button class="btn btn-primary" id="submitOrder" style="margin-top:1.5rem" disabled>Valider la commande</button></div></div></div><script>let cart=[];let deliveryMode='home';let paymentMode='card';function loadCart(){const saved=localStorage.getItem('pizzaman_cart');cart=saved?JSON.parse(saved):[];renderCart();updateTotals()}function renderCart(){const container=document.getElementById('cartItems');const totalsDiv=document.getElementById('cartTotals');if(cart.length===0){container.innerHTML=`<div class="empty-cart"><div class="empty-cart-icon">üõí</div><p style="color:#888;margin-bottom:1rem">Votre panier est vide</p><button class="btn btn-secondary" onclick="location.href='menu.html'">Voir le menu</button></div>`;totalsDiv.style.display='none';return}totalsDiv.style.display='block';container.innerHTML=cart.map((item,index)=>`<div class="cart-item" data-index="${index}"><img src="${item.image}" alt="${item.name}"><div class="cart-item-details"><div class="cart-item-name">${item.name}</div><div class="cart-item-price">${item.price.toFixed(2)}‚Ç¨</div><div class="quantity-control"><button class="quantity-btn" onclick="updateQuantity(${index},-1)">‚àí</button><span class="quantity-value">${item.quantity}</span><button class="quantity-btn" onclick="updateQuantity(${index},1)">+</button></div></div><button class="remove-btn" onclick="removeFromCart(${index})">üóëÔ∏è</button></div>`).join('')}function updateQuantity(index,change){cart[index].quantity+=change;if(cart[index].quantity<=0){removeFromCart(index);return}saveCart();renderCart();updateTotals();showToast('Quantit√© mise √† jour')}function removeFromCart(index){const item=document.querySelector(`.cart-item[data-index="${index}"]`);item.classList.add('removing');setTimeout(()=>{cart.splice(index,1);saveCart();renderCart();updateTotals();showToast('Article supprim√©','success')},300)}function saveCart(){localStorage.setItem('pizzaman_cart',JSON.stringify(cart))}function updateTotals(){const subtotal=cart.reduce((sum,item)=>sum+(item.price*item.quantity),0);const deliveryFee=deliveryMode==='home'?3.50:0;const total=subtotal+deliveryFee;document.getElementById('subtotal').textContent=subtotal.toFixed(2)+'‚Ç¨';document.getElementById('deliveryFee').textContent=deliveryFee.toFixed(2)+'‚Ç¨';document.getElementById('total').textContent=total.toFixed(2)+'‚Ç¨';validateForm()}function showToast(message,type='success'){const toast=document.createElement('div');toast.className=`toast ${type}`;toast.textContent=message;document.body.appendChild(toast);setTimeout(()=>toast.remove(),3000)}document.querySelectorAll('.radio-option').forEach(option=>{option.addEventListener('click',function(){const group=this.querySelector('input[type="radio"]').name;document.querySelectorAll(`input[name="${group}"]`).forEach(radio=>{radio.closest('.radio-option').classList.remove('selected')});this.classList.add('selected');this.querySelector('input[type="radio"]').checked=true;if(this.dataset.delivery){deliveryMode=this.dataset.delivery;updateTotals()}if(this.dataset.payment){paymentMode=this.querySelector('input').value;const cardFields=document.getElementById('cardFields');cardFields.classList.toggle('active',paymentMode==='card');validateForm()}})});document.querySelectorAll('input[name="delivery"]')[0].closest('.radio-option').classList.add('selected');document.querySelectorAll('input[name="payment"]')[0].closest('.radio-option').classList.add('selected');const cardNumber=document.getElementById('cardNumber');cardNumber.addEventListener('input',function(){let val=this.value.replace(/\s/g,'');if(val.length>16)val=val.substr(0,16);this.value=val.match(/.{1,4}/g)?.join(' ')||val});const cardExpiry=document.getElementById('cardExpiry');cardExpiry.addEventListener('input',function(){let val=this.value.replace(/\D/g,'');if(val.length>=2)val=val.substr(0,2)+'/'+val.substr(2,2);this.value=val});const phone=document.getElementById('phone');phone.addEventListener('input',function(){this.value=this.value.replace(/[^0-9]/g,'')});function validateForm(){const form=document.getElementById('orderForm');const submitBtn=document.getElementById('submitOrder');let isValid=true;if(cart.length===0){isValid=false}const firstName=document.getElementById('firstName').value.trim();const lastName=document.getElementById('lastName').value.trim();const email=document.getElementById('email').value.trim();const phoneVal=document.getElementById('phone').value.trim();const address=document.getElementById('address').value.trim();const zipCode=document.getElementById('zipCode').value.trim();const city=document.getElementById('city').value.trim();if(!firstName||!lastName||!address||!city)isValid=false;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email))isValid=false;if(!/^[0-9]{10}$/.test(phoneVal.replace(/\s/g,'')))isValid=false;if(!/^[0-9]{5}$/.test(zipCode))isValid=false;if(paymentMode==='card'){const cardNum=document.getElementById('cardNumber').value.replace(/\s/g,'');const expiry=document.getElementById('cardExpiry').value;const cvv=document.getElementById('cardCVV').value;if(!/^[0-9]{16}$/.test(cardNum))isValid=false;if(!/^[0-9]{2}\/[0-9]{2}$/.test(expiry))isValid=false;if(!/^[0-9]{3}$/.test(cvv))isValid=false}submitBtn.disabled=!isValid}document.getElementById('orderForm').addEventListener('input',validateForm);document.getElementById('orderForm').addEventListener('submit',function(e){e.preventDefault();const submitBtn=document.getElementById('submitOrder');if(submitBtn.disabled)return;submitBtn.classList.add('btn-loading');submitBtn.disabled=true;const orderNumber='PM-2026-'+Math.floor(10000+Math.random()*90000);const orderData={orderNumber,date:new Date().toISOString(),customer:{firstName:document.getElementById('firstName').value,lastName:document.getElementById('lastName').value,email:document.getElementById('email').value,phone:document.getElementById('phone').value},address:{street:document.getElementById('address').value,zipCode:document.getElementById('zipCode').value,city:document.getElementById('city').value},deliveryMode,paymentMode,items:cart,subtotal:cart.reduce((sum,item)=>sum+(item.price*item.quantity),0),deliveryFee:deliveryMode==='home'?3.50:0,total:cart.reduce((sum,item)=>sum+(item.price*item.quantity),0)+(deliveryMode==='home'?3.50:0),instructions:document.getElementById('instructions').value};const orders=JSON.parse(localStorage.getItem('pizzaman_orders')||'[]');orders.push(orderData);localStorage.setItem('pizzaman_orders',JSON.stringify(orders));localStorage.removeItem('pizzaman_cart');setTimeout(()=>{location.href=`confirmation.html?order=${orderNumber}`},1500)});document.getElementById('submitOrder').addEventListener('click',()=>{document.getElementById('orderForm').requestSubmit()});const session=JSON.parse(localStorage.getItem('pizzaman_session')||'null');if(session?.user){document.getElementById('firstName').value=session.user.firstName||'';document.getElementById('lastName').value=session.user.lastName||'';document.getElementById('email').value=session.user.email||''}loadCart()</script><script>

// Toast system
function showToast(message, type='success') {
  const existing = document.querySelectorAll('.toast-notification');
  existing.forEach(t => t.remove());
  const toast = document.createElement('div');
  toast.className = 'toast-notification';
  toast.style.cssText = 'position:fixed;top:20px;right:20px;padding:15px 25px;border-radius:10px;color:#fff;font-size:.95rem;z-index:9999;animation:slideInToast .4s ease;box-shadow:0 5px 20px rgba(0,0,0,.2);max-width:350px;font-family:Inter,sans-serif';
  toast.style.background = type === 'success' ? '#27ae60' : type === 'error' ? '#e74c3c' : '#f39c12';
  toast.textContent = message;
  document.body.appendChild(toast);
  setTimeout(() => { toast.style.animation = 'slideOutToast .4s ease forwards'; setTimeout(() => toast.remove(), 400); }, 3000);
}

// Cart functions
function getCart() { return JSON.parse(localStorage.getItem('pizzaman_cart') || '[]'); }
function saveCart(cart) { localStorage.setItem('pizzaman_cart', JSON.stringify(cart)); updateCartCount(); }
function getCartCount() { return getCart().reduce((sum, item) => sum + item.quantity, 0); }
function getCartTotal() { return getCart().reduce((sum, item) => sum + (item.price * item.quantity), 0); }
function addToCart(id, name, price, category) {
  const cart = getCart();
  const existing = cart.find(item => item.id === id);
  if (existing) { existing.quantity++; } else { cart.push({id, name, price: parseFloat(price), quantity: 1, category}); }
  saveCart(cart);
  showToast(name + ' ajout√© au panier !');
}
function removeFromCart(id) {
  let cart = getCart().filter(item => item.id !== id);
  saveCart(cart);
}
function updateQuantity(id, delta) {
  const cart = getCart();
  const item = cart.find(i => i.id === id);
  if (item) { item.quantity += delta; if (item.quantity <= 0) { removeFromCart(id); return; } }
  saveCart(cart);
}
function updateCartCount() {
  const countEls = document.querySelectorAll('#cartCount, .cart-count');
  const count = getCartCount();
  countEls.forEach(el => { el.textContent = count; el.style.display = count > 0 ? 'flex' : 'none'; });
}

// Auth check
function checkAuth() {
  const session = JSON.parse(localStorage.getItem('pizzaman_session') || 'null');
  const link = document.getElementById('nav-account-link');
  if (session && link) {
    link.innerHTML = '<i class="fa-solid fa-user"></i> ' + session.name;
    link.href = 'login.html';
  }
}

// Mobile menu
function toggleMobileMenu() {
  document.getElementById('navLinks').classList.toggle('active');
  const spans = document.querySelectorAll('.hamburger span');
  spans[0].style.transform = document.getElementById('navLinks').classList.contains('active') ? 'rotate(45deg) translate(5px, 6px)' : '';
  spans[1].style.opacity = document.getElementById('navLinks').classList.contains('active') ? '0' : '1';
  spans[2].style.transform = document.getElementById('navLinks').classList.contains('active') ? 'rotate(-45deg) translate(5px, -6px)' : '';
}

// Init
document.addEventListener('DOMContentLoaded', function() { updateCartCount(); checkAuth(); });

</script>
</body></html>